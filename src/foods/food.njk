<article class="grid gap-6">
  <header class="rounded-3xl border border-white/80 bg-white/90 p-7 shadow-panel">
    <p class="text-sm font-medium uppercase tracking-[0.14em] text-slate-500">Storage Guide</p>
    <h1 class="mt-2 font-display text-4xl leading-tight sm:text-5xl">How long does {{ food.name }} last?</h1>
    <div class="mt-4 flex flex-wrap items-center gap-3">
      <span class="rounded-full bg-frost px-3 py-1 text-xs font-semibold uppercase tracking-[0.12em] text-slate-600">{{ food.category }}</span>
      {% if food.high_risk_food %}
      <span class="rounded-full bg-[#ffe9d1] px-3 py-1 text-xs font-semibold uppercase tracking-[0.12em] text-[#b45309]">Higher risk food</span>
      {% endif %}
    </div>
  </header>

  <section class="rounded-3xl border border-[#dbe7ff] bg-gradient-to-br from-[#f8fbff] to-[#e9f0ff] p-6 shadow-panel" aria-labelledby="storage-summary">
    <h2 id="storage-summary" class="font-display text-2xl">Storage Summary</h2>
    <div class="mt-4 grid gap-3 sm:grid-cols-3">
      <div class="rounded-xl border border-white bg-white/80 p-4">
        <p class="text-xs uppercase tracking-[0.12em] text-slate-500">Pantry</p>
        <p class="mt-1 text-xl font-semibold">{{ food.pantry_min_days }}-{{ food.pantry_max_days }} days</p>
      </div>
      <div class="rounded-xl border border-white bg-white/80 p-4">
        <p class="text-xs uppercase tracking-[0.12em] text-slate-500">Fridge</p>
        <p class="mt-1 text-xl font-semibold">{{ food.fridge_min_days }}-{{ food.fridge_max_days }} days</p>
      </div>
      <div class="rounded-xl border border-white bg-white/80 p-4">
        <p class="text-xs uppercase tracking-[0.12em] text-slate-500">Freezer</p>
        <p class="mt-1 text-xl font-semibold">{{ food.freezer_min_days }}-{{ food.freezer_max_days }} days</p>
      </div>
    </div>
  </section>

  <section class="grid gap-6 lg:grid-cols-2">
    <div class="rounded-2xl border border-white/80 bg-white/90 p-6 shadow-panel" aria-labelledby="spoilage-signs">
      <h2 id="spoilage-signs" class="font-display text-2xl">Spoilage signs</h2>
      <ul class="mt-4 space-y-2">
        {% for sign in food.spoilage_signs %}
        <li class="rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700">{{ sign | replace("_", " ") }}</li>
        {% endfor %}
      </ul>
    </div>

    <div class="rounded-2xl border border-white/80 bg-white/90 p-6 shadow-panel" aria-labelledby="storage-tips">
      <h2 id="storage-tips" class="font-display text-2xl">Storage tips</h2>
      <ul class="mt-4 space-y-2">
        {% for tip in food.storage_tips %}
        <li class="rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700">{{ tip | replace("_", " ") }}</li>
        {% endfor %}
      </ul>
    </div>
  </section>

  {% if food.notes %}
  <section class="rounded-2xl border border-white/80 bg-white/90 p-6 shadow-panel" aria-labelledby="notes">
    <h2 id="notes" class="font-display text-2xl">Notes</h2>
    <p class="mt-3 text-slate-700">{{ food.notes }}</p>
  </section>
  {% endif %}

  <section class="rounded-2xl border border-amber-200 bg-[#fff8ee] p-6 shadow-panel" aria-labelledby="safety-disclaimer">
    <h2 id="safety-disclaimer" class="font-display text-2xl text-amber-900">Safety disclaimer</h2>
    <p class="mt-3 text-amber-900/90">
      Educational only, not medical advice. When in doubt, throw it out.
      Read the <a class="font-semibold underline decoration-amber-500 underline-offset-2" href="/disclaimer/">full disclaimer</a>.
    </p>
  </section>

  <section class="grid gap-6 lg:grid-cols-2">
    <div class="rounded-2xl border border-white/80 bg-white/90 p-6 shadow-panel" aria-labelledby="sources-used">
      <h2 id="sources-used" class="font-display text-2xl">Sources used</h2>
      {% if matchingSources.length > 0 %}
      <ul class="mt-4 space-y-3">
        {% for source in matchingSources %}
        <li class="rounded-lg border border-slate-200 p-3">
          <a class="font-semibold text-pine hover:underline" href="{{ source.url }}">{{ source.title }}</a>
          <p class="mt-1 text-sm text-slate-500">{{ source.publisher }}</p>
        </li>
        {% endfor %}
      </ul>
      {% else %}
      <p class="mt-3 text-slate-600">No source mappings for this exact food or category yet.</p>
      {% endif %}
    </div>

    <div class="rounded-2xl border border-white/80 bg-white/90 p-6 shadow-panel" aria-labelledby="metadata">
      <h2 id="metadata" class="font-display text-2xl">Dataset metadata</h2>
      <dl class="mt-4 space-y-2 text-sm text-slate-700">
        <div class="flex items-center justify-between gap-3 rounded-lg bg-slate-50 px-3 py-2">
          <dt class="font-medium">Version</dt>
          <dd>{{ dataset.version }}</dd>
        </div>
        <div class="flex items-center justify-between gap-3 rounded-lg bg-slate-50 px-3 py-2">
          <dt class="font-medium">Last updated</dt>
          <dd>{{ dataset.last_updated }}</dd>
        </div>
      </dl>
    </div>
  </section>

  <section class="rounded-2xl border border-white/80 bg-white/90 p-6 shadow-panel" aria-labelledby="related-foods">
    <div class="flex flex-wrap items-end justify-between gap-3">
      <h2 id="related-foods" class="font-display text-2xl">Related foods</h2>
      <a href="/food-left-out-calculator/" class="text-sm font-semibold text-pine hover:underline">Food left out calculator</a>
    </div>

    {% if relatedFoods.length > 0 %}
    <div class="mt-4 grid gap-3 sm:grid-cols-2 xl:grid-cols-3">
      {% for related in relatedFoods %}
      <a href="/how-long-does-{{ related.slug }}-last/" class="rounded-xl border border-slate-200 bg-white p-4 transition hover:border-slate-400 hover:shadow-panel">
        <p class="font-semibold text-ink">{{ related.name }}</p>
        <p class="mt-1 text-sm capitalize text-slate-500">{{ related.category }}</p>
      </a>
      {% endfor %}
    </div>
    {% else %}
    <p class="mt-3 text-slate-600">No related foods in this category yet.</p>
    {% endif %}
  </section>
</article>
